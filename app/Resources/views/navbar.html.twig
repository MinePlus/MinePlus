<nav class="navbar navbar-default{%if config('design.navbar.inverse', false) %}navbar-inverse{% endif %}" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">{{ 'application'|trans }}</a>
    </div>
    
    <div class="collapse navbar-collapse navbar-exl-collapse">
        <ul class="nav navbar-nav">
            {# 
                TODO: normally this should only be used for debugging,
                we'll find a better/safer checking mechanism!
            #}
            <li{% if app.request.get('_route') == 'dashboard' %} class="active"{% endif %}>
                <a href="{{ path('dashboard') }}">{{ 'dashboard'|trans }}</a>
            </li>
            <li{% if app.request.get('_route') == 'mineplus_main_player_list' %} class="active"{% endif %}>
                <a href="{{ path('mineplus_main_player_list') }}">{{ 'players'|trans }}</a>
            </li>
        </ul>
        {% if is_granted('ROLE_USER') %}
            <ul class="nav navbar-nav pull-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        {% if config('design.navbar.avatar.show', true) %}
                            {{ avatar(app.user.username, config('design.navbar.avatar.size', 20))|raw }}
                        {% endif %}
                        {{ app.user.username }}
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="{{ path('fos_user_security_logout') }}">{{ 'logout'|trans }}</a>
                        </li>
                    </ul>
                </li>
            </ul>
            
            {# Chat status indicator/opener #}
            <a class="btn navbar-btn btn-primary disabled chat-indicator pull-right margin-right-little" data-toggle="modal" href="#chat-modal">{{ 'chat.open'|trans }}</a>
        {% else %}
            <a class="btn navbar-btn btn-default pull-right" href="{{ path('fos_user_security_login') }}">{{ 'login'|trans }}</a>
        {% endif %}
    </div>
</nav>